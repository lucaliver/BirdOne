(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))t(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const n of a.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&t(n)}).observe(document,{childList:!0,subtree:!0});function s(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function t(i){if(i.ep)return;i.ep=!0;const a=s(i);fetch(i.href,a)}})();const w={CANVAS_ID:"game-canvas",MATCH_DURATION:60,LOGICAL_RES:{HEIGHT:1080}},u={EAGLE:{MAX_HP:100,DAMAGE:20,SPEED:250},OWL:{MAX_HP:80,DAMAGE:30,SPEED:220},PIDGEON:{MAX_HP:60,DAMAGE:15,SPEED:300},HUMMINGBIRD:{MAX_HP:150,DAMAGE:10,SPEED:180}},A={PLAYER:"lime",ENEMY:"red",PROJECTILE:"yellow"};class R{keys={};mouse={x:0,y:0,down:!1};joystick={x:0,y:0,active:!1};isShooting=!1;scale=1;constructor(e){window.addEventListener("keydown",t=>this.keys[t.code]=!0),window.addEventListener("keyup",t=>this.keys[t.code]=!1);const s=(t,i)=>{const a=e.getBoundingClientRect(),n=t-a.left,o=i-a.top,h=w.LOGICAL_RES.HEIGHT/a.height;this.mouse.x=n*h,this.mouse.y=o*h};window.addEventListener("mousemove",t=>s(t.clientX,t.clientY)),window.addEventListener("mousedown",t=>{s(t.clientX,t.clientY),this.mouse.down=!0}),window.addEventListener("mouseup",()=>this.mouse.down=!1),window.addEventListener("touchstart",t=>{t.touches.length>0&&(s(t.touches[0].clientX,t.touches[0].clientY),this.mouse.down=!0)},{passive:!1}),window.addEventListener("touchmove",t=>{t.touches.length>0&&s(t.touches[0].clientX,t.touches[0].clientY)},{passive:!1}),window.addEventListener("touchend",()=>{this.mouse.down=!1})}isDown(e){return!!this.keys[e]}reset(){this.keys={},this.mouse.down=!1}setScale(e){this.scale=e}}class f{game;constructor(e){this.game=e}enter(){}exit(){}}class O{input;container;joystickBase;joystickStick;shootBtn;baseX=0;baseY=0;touchId=null;maxRadius=40;constructor(e){this.input=e,this.container=document.getElementById("ui-layer"),this.joystickBase=document.createElement("div"),this.joystickBase.className="joystick-base",this.joystickStick=document.createElement("div"),this.joystickStick.className="joystick-stick",this.joystickBase.appendChild(this.joystickStick),this.container.appendChild(this.joystickBase),this.shootBtn=document.createElement("div"),this.shootBtn.className="shoot-btn",this.shootBtn.innerText="FIRE",this.container.appendChild(this.shootBtn),this.hide(),this.setupEvents()}setupEvents(){this.joystickBase.addEventListener("touchstart",t=>{t.preventDefault();const i=t.changedTouches[0];this.touchId=i.identifier,this.baseX=i.clientX,this.baseY=i.clientY,this.input.joystick.active=!0},{passive:!1}),this.joystickBase.addEventListener("touchmove",t=>{if(t.preventDefault(),this.touchId!==null){for(let i=0;i<t.changedTouches.length;i++)if(t.changedTouches[i].identifier===this.touchId){const a=t.changedTouches[i],n=a.clientX-this.baseX,o=a.clientY-this.baseY,h=Math.sqrt(n*n+o*o),r=Math.atan2(o,n),c=Math.min(h,this.maxRadius),m=Math.cos(r)*c,d=Math.sin(r)*c;this.joystickStick.style.transform=`translate(${m}px, ${d}px)`,this.input.joystick.x=m/this.maxRadius,this.input.joystick.y=d/this.maxRadius}}},{passive:!1});const e=t=>{for(let i=0;i<t.changedTouches.length;i++)t.changedTouches[i].identifier===this.touchId&&(this.touchId=null,this.input.joystick.active=!1,this.input.joystick.x=0,this.input.joystick.y=0,this.joystickStick.style.transform="translate(0px, 0px)")};this.joystickBase.addEventListener("touchend",e),this.joystickBase.addEventListener("touchcancel",e),this.shootBtn.addEventListener("touchstart",t=>{t.preventDefault(),this.input.isShooting=!0,this.shootBtn.style.background="rgba(255, 0, 0, 0.8)"},{passive:!1});const s=t=>{t.preventDefault(),this.input.isShooting=!1,this.shootBtn.style.background="rgba(255, 0, 0, 0.5)"};this.shootBtn.addEventListener("touchend",s),this.shootBtn.addEventListener("touchcancel",s)}show(){this.joystickBase.style.display="flex",this.shootBtn.style.display="flex"}hide(){this.joystickBase.style.display="none",this.shootBtn.style.display="none"}}class P{listeners={};on(e,s){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(s)}off(e,s){this.listeners[e]&&(this.listeners[e]=this.listeners[e].filter(t=>t!==s))}emit(e,s){this.listeners[e]&&this.listeners[e].forEach(t=>t(s))}}class L{canvas;ctx;input;touchControls;eventBus;currentScene=null;lastTime=0;scale=1;constructor(e){this.canvas=document.getElementById(e),this.ctx=this.canvas.getContext("2d"),this.input=new R(this.canvas),this.touchControls=new O(this.input),this.eventBus=new P,this.resize(),window.addEventListener("resize",()=>this.resize()),requestAnimationFrame(s=>this.loop(s))}resize(){this.canvas.width=window.innerWidth,this.canvas.height=window.innerHeight,this.scale=this.canvas.height/w.LOGICAL_RES.HEIGHT,this.input.setScale(this.scale)}setScene(e){this.currentScene&&this.currentScene.exit(),this.input.reset(),this.currentScene=e,this.currentScene&&this.currentScene.enter()}loop(e){const s=(e-this.lastTime)/1e3;this.lastTime=e,this.currentScene&&(this.currentScene.update(s),this.ctx.fillStyle="#222",this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height),this.ctx.save(),this.ctx.scale(this.scale,this.scale),this.currentScene.draw(this.ctx),this.ctx.restore()),requestAnimationFrame(t=>this.loop(t))}}class B extends f{message;constructor(e,s){super(e),this.message=s}enter(){this.game.touchControls.hide()}update(e){(this.game.input.keys.Enter||this.game.input.keys.Space||this.game.input.mouse.down)&&this.game.setScene(new g(this.game))}draw(e){const s=e.getTransform().a,t=e.canvas.width/s,i=1080;e.fillStyle="#222",e.fillRect(0,0,t,i),e.fillStyle="#fff",e.font="bold 40px Arial",e.textAlign="center",e.fillText(this.message,t/2,i/2-50),e.font="20px Arial",e.fillText("Press Enter / Tap to Return to Hub",t/2,i/2+50)}}class D{x;y;width;height;vx=0;vy=0;color="#fff";markedForDeletion=!1;constructor(e,s,t,i,a){this.x=e,this.y=s,this.width=t,this.height=i,this.color=a}update(e){this.x+=this.vx*e,this.y+=this.vy*e}draw(e){e.fillStyle=this.color,e.fillRect(this.x,this.y,this.width,this.height)}getBounds(){return{x:this.x,y:this.y,width:this.width,height:this.height}}collidesWith(e){return this.x<e.x+e.width&&this.x+this.width>e.x&&this.y<e.y+e.height&&this.y+this.height>e.y}}class p{static images={};static toLoad=0;static loaded=0;static loadImage(e,s){const t=new Image;this.toLoad++,t.onload=()=>{this.loaded++,this.images[e]=t,console.log(`Loaded asset: ${e}`)},t.onerror=()=>{this.loaded++,console.error(`Failed to load asset: ${e} from ${s}`)},t.src=s}static getImage(e){return this.images[e]}static isReady(){return this.toLoad>0&&this.toLoad===this.loaded}static preload(e){const s="/BirdOne/";[{key:"Eagle",src:`${s}assets/eagle.png`},{key:"Owl",src:`${s}assets/owl.png`},{key:"Pidgeon",src:`${s}assets/pidgeon.png`},{key:"Hummingbird",src:`${s}assets/hummingbird.png`},{key:"Projectile",src:`${s}assets/projectile.png`},{key:"Background",src:`${s}assets/background.png`},{key:"Title",src:`${s}assets/title_logo.png`},{key:"MenuBackground",src:`${s}assets/menu_background.jpg`}].forEach(a=>this.loadImage(a.key,a.src));const i=setInterval(()=>{this.isReady()&&(clearInterval(i),e())},100)}}class _ extends D{owner;damage;active=!0;constructor(e,s,t,i,a,n){super(e,s,32,32,A.PROJECTILE),this.vx=t,this.vy=i,this.owner=a,this.damage=n}update(e){super.update(e),(this.x<-100||this.x>3e3||this.y<-100||this.y>3e3)&&(this.active=!1)}draw(e){const s=p.getImage("Projectile");if(s){if(e.save(),e.translate(this.x+this.width/2,this.y+this.height/2),this.vx!==0||this.vy!==0){const t=Math.atan2(this.vy,this.vx);e.rotate(t)}e.drawImage(s,-this.width/2,-this.height/2,this.width,this.height),e.restore()}else super.draw(e)}}class k extends D{race;hp;maxHp;attackDamage;speed;cooldown=0;maxCooldown=.5;team;constructor(e,s,t,i){switch(super(e,s,80,80,i==="player"?A.PLAYER:A.ENEMY),this.race=t,this.team=i,t){case"Eagle":this.maxHp=u.EAGLE.MAX_HP,this.attackDamage=u.EAGLE.DAMAGE,this.speed=u.EAGLE.SPEED;break;case"Owl":this.maxHp=u.OWL.MAX_HP,this.attackDamage=u.OWL.DAMAGE,this.speed=u.OWL.SPEED;break;case"Pidgeon":this.maxHp=u.PIDGEON.MAX_HP,this.attackDamage=u.PIDGEON.DAMAGE,this.speed=u.PIDGEON.SPEED;break;case"Hummingbird":this.maxHp=u.HUMMINGBIRD.MAX_HP,this.attackDamage=u.HUMMINGBIRD.DAMAGE,this.speed=u.HUMMINGBIRD.SPEED;break}this.hp=this.maxHp}update(e){super.update(e),this.cooldown>0&&(this.cooldown-=e)}shoot(e,s){if(this.cooldown>0)return null;const t=e-(this.x+this.width/2),i=s-(this.y+this.height/2),a=Math.sqrt(t*t+i*i);if(a===0)return null;const n=500,o=t/a*n,h=i/a*n;return this.cooldown=this.maxCooldown,new _(this.x+this.width/2-4,this.y+this.height/2-4,o,h,this,this.attackDamage)}draw(e){const s=p.getImage(this.race);if(s){if(e.save(),e.translate(this.x+this.width/2,this.y+this.height/2),this.vx!==0||this.vy!==0){const i=Math.atan2(this.vy,this.vx);e.rotate(i)}e.drawImage(s,-this.width/2,-this.height/2,this.width,this.height),e.restore()}else super.draw(e);const t=this.hp/this.maxHp;e.fillStyle="red",e.fillRect(this.x,this.y-10,this.width,5),e.fillStyle="lime",e.fillRect(this.x,this.y-10,this.width*t,5),e.font="bold 14px Arial",e.textAlign="center",e.strokeStyle="black",e.lineWidth=3,e.strokeText(this.race,this.x+this.width/2,this.y-15),this.team==="player"?e.fillStyle="#00BFFF":e.fillStyle="#FF4500",e.fillText(this.race,this.x+this.width/2,this.y-15)}}class G{player=null;allies=[];enemies=[];projectiles=[];matchTime=w.MATCH_DURATION;score={player:0,enemy:0};isGameOver=!1;constructor(){}init(e,s,t){this.player=e,this.allies=s,this.enemies=t,this.projectiles=[],this.matchTime=w.MATCH_DURATION,this.score={player:0,enemy:0},this.isGameOver=!1}update(e){this.isGameOver||(this.matchTime-=e,this.matchTime<=0&&(this.matchTime=0,this.isGameOver=!0),this.allies=this.allies.filter(s=>s.hp>0),this.enemies=this.enemies.filter(s=>s.hp>0),this.projectiles=this.projectiles.filter(s=>!s.markedForDeletion))}addProjectile(e){this.projectiles.push(e)}}class I{bot;gameState;target=null;searchTimer=0;searchInterval=.5;constructor(e,s){this.bot=e,this.gameState=s}update(e){if(this.bot.hp<=0||(this.searchTimer-=e,(this.searchTimer<=0||this.target&&this.target.hp<=0)&&(this.findTarget(),this.searchTimer=this.searchInterval),!this.target))return;const s=this.target.x-this.bot.x,t=this.target.y-this.bot.y,i=Math.hypot(s,t);if(i>200?(this.bot.vx=s/i*this.bot.speed*.5,this.bot.vy=t/i*this.bot.speed*.5):i<100?(this.bot.vx=-(s/i)*this.bot.speed*.5,this.bot.vy=-(t/i)*this.bot.speed*.5):(this.bot.vx=0,this.bot.vy=0),Math.random()<.05){const a=this.bot.shoot(this.target.x,this.target.y);a&&this.gameState.addProjectile(a)}}findTarget(){let e=[];this.bot.team==="player"?e=this.gameState.enemies:e=[this.gameState.player,...this.gameState.allies];let s=null,t=1/0;e.forEach(i=>{if(i&&i.hp>0){const a=Math.hypot(i.x-this.bot.x,i.y-this.bot.y);a<t&&(t=a,s=i)}}),this.target=s}}class j{gameState;constructor(e){this.gameState=e}draw(e){const s=e.getTransform().a,t=e.canvas.width/s;e.save(),e.fillStyle="rgba(0, 0, 0, 0.5)",e.fillRect(10,10,350,60);const i=this.gameState.player;if(i){const n=Math.max(0,i.hp/i.maxHp);e.fillStyle="#444",e.fillRect(20,20,300,30),e.fillStyle=n>.5?"lime":n>.2?"orange":"red",e.fillRect(20,20,300*n,30),e.strokeStyle="#fff",e.lineWidth=2,e.strokeRect(20,20,300,30),e.fillStyle="#fff",e.font="bold 24px Arial",e.textAlign="left",e.fillText(`HP: ${Math.ceil(i.hp)}`,330,44)}e.fillStyle="rgba(0, 0, 0, 0.5)",e.fillRect(t/2-60,10,120,50),e.fillStyle="#fff",e.font="bold 40px Arial",e.textAlign="center",e.fillText(`${Math.ceil(this.gameState.matchTime)}`,t/2,48),e.fillStyle="rgba(0, 0, 0, 0.5)",e.fillRect(t-260,10,250,80),e.font="bold 28px Arial",e.textAlign="right",e.fillStyle="cyan";const a=this.gameState.allies.length+(i&&i.hp>0?1:0);e.fillText(`Allies: ${a}`,t-20,40),e.fillStyle="#ff4444",e.fillText(`Enemies: ${this.gameState.enemies.length}`,t-20,80),e.restore()}}class H extends f{gameState;botControllers=[];hud;onGameOver=e=>{this.game.setScene(new B(this.game,e.message))};constructor(e,s){super(e),this.gameState=new G,this.hud=new j(this.gameState);const t=new k(100,300,s,"player"),i=[];for(let o=0;o<4;o++){const h=["Eagle","Owl","Pidgeon","Hummingbird"],r=h[Math.floor(Math.random()*h.length)],c=new k(100,100+o*100,r,"player");i.push(c),this.botControllers.push(new I(c,this.gameState))}const a=[],n=this.game.canvas.width/this.game.scale;for(let o=0;o<5;o++){const h=["Eagle","Owl","Pidgeon","Hummingbird"],r=h[Math.floor(Math.random()*h.length)],c=new k(n-100,100+o*100,r,"enemy");a.push(c),this.botControllers.push(new I(c,this.gameState))}this.gameState.init(t,i,a)}enter(){("ontouchstart"in window||navigator.maxTouchPoints>0)&&this.game.touchControls.show(),this.game.eventBus.on("GAME_OVER",this.onGameOver)}exit(){this.game.touchControls.hide(),this.game.eventBus.off("GAME_OVER",this.onGameOver)}update(e){if(this.gameState.update(e),this.gameState.isGameOver){this.checkWinCondition();return}const s=this.gameState.player;if(s.vx=0,s.vy=0,(this.game.input.keys.KeyW||this.game.input.keys.ArrowUp)&&(s.vy=-s.speed),(this.game.input.keys.KeyS||this.game.input.keys.ArrowDown)&&(s.vy=s.speed),(this.game.input.keys.KeyA||this.game.input.keys.ArrowLeft)&&(s.vx=-s.speed),(this.game.input.keys.KeyD||this.game.input.keys.ArrowRight)&&(s.vx=s.speed),this.game.input.joystick.active&&(s.vx=this.game.input.joystick.x*s.speed,s.vy=this.game.input.joystick.y*s.speed),this.game.input.mouse.down){const t=s.shoot(this.game.input.mouse.x,this.game.input.mouse.y);t&&this.gameState.addProjectile(t)}if(this.game.input.isShooting){let t=s.x+(s.vx||100),i=s.y+s.vy,a=null,n=400;this.gameState.enemies.forEach(h=>{if(h.hp<=0)return;const r=Math.hypot(h.x-s.x,h.y-s.y);r<n&&(n=r,a=h)}),a&&(t=a.x,i=a.y);const o=s.shoot(t,i);o&&this.gameState.addProjectile(o)}this.botControllers.forEach(t=>t.update(e)),s.update(e),this.gameState.allies.forEach(t=>t.update(e)),this.gameState.enemies.forEach(t=>t.update(e)),this.gameState.projectiles.forEach(t=>t.update(e)),this.checkCollisions(),s.hp<=0&&this.game.eventBus.emit("GAME_OVER",{winner:"enemy",message:"You Died! Defeat!"}),this.gameState.enemies.length===0&&this.game.eventBus.emit("GAME_OVER",{winner:"player",message:"All Enemies Defeated! Victory!"})}checkCollisions(){const e=[this.gameState.player,...this.gameState.allies,...this.gameState.enemies];this.gameState.projectiles.forEach(s=>{s.active&&e.forEach(t=>{t.hp<=0||s.owner!==t&&s.owner.team!==t.team&&s.collidesWith(t)&&(t.hp-=s.damage,s.active=!1,t.hp<=0&&this.game.eventBus.emit("ENTITY_DIED",{entityId:"bird",type:t.team}))})})}checkWinCondition(){this.gameState.enemies.length<this.gameState.allies.length+1?this.game.eventBus.emit("GAME_OVER",{winner:"player",message:"Time Up! Victory (More Alive)!"}):this.game.eventBus.emit("GAME_OVER",{winner:"enemy",message:"Time Up! Defeat (Less Alive)!"})}draw(e){const s=p.getImage("Background");if(s){const t=e.createPattern(s,"repeat");t?(e.fillStyle=t,e.fillRect(0,0,this.game.canvas.width/this.game.scale,this.game.canvas.height/this.game.scale)):e.drawImage(s,0,0)}this.gameState.player&&this.gameState.player.draw(e),this.gameState.allies.forEach(t=>t.draw(e)),this.gameState.enemies.forEach(t=>t.draw(e)),this.gameState.projectiles.forEach(t=>t.draw(e)),this.hud.draw(e)}}class C extends f{races=["Eagle","Owl","Pidgeon","Hummingbird"];selectedRaceIndex=0;constructor(e){super(e)}update(e){let s=!1,t=!1,i=!1,a=!1;if(this.game.input.keys.ArrowRight&&!this.game.input.isDown("ArrowRight_prev")&&(s=!0),this.game.input.keys.ArrowLeft&&!this.game.input.isDown("ArrowLeft_prev")&&(t=!0),(this.game.input.keys.Enter||this.game.input.keys.Space)&&(i=!0),this.game.input.keys.Escape&&(a=!0),this.game.input.mouse.down&&!this.game.input.isDown("Mouse_prev")){const n=this.game.input.mouse.x,o=this.game.input.mouse.y,h=this.game.canvas.width/this.game.scale,r=1080;n<100&&o<60?a=!0:o>r-150&&o<r-50&&n>h/2-100&&n<h/2+100?i=!0:n<h*.3?t=!0:n>h*.7&&(s=!0)}s&&(this.selectedRaceIndex=(this.selectedRaceIndex+1)%this.races.length),t&&(this.selectedRaceIndex=(this.selectedRaceIndex-1+this.races.length)%this.races.length),this.game.input.keys.ArrowRight_prev=this.game.input.keys.ArrowRight,this.game.input.keys.ArrowLeft_prev=this.game.input.keys.ArrowLeft,this.game.input.keys.Mouse_prev=this.game.input.mouse.down,a?this.game.setScene(new g(this.game)):i&&this.game.setScene(new H(this.game,this.races[this.selectedRaceIndex]))}draw(e){const s=e.getTransform().a,t=e.canvas.width/s,i=1080;e.fillStyle="#222",e.fillRect(0,0,t,i),e.fillStyle="#fff",e.font="bold 48px Arial",e.textAlign="center",e.fillText("SELECT YOUR HERO",t/2,100);const a=this.races[this.selectedRaceIndex],n=p.getImage(a);n&&e.drawImage(n,t/2-200/2,i/2-200/2,200,200),e.fillStyle="#00BFFF",e.font="bold 40px Arial",e.strokeStyle="black",e.lineWidth=4,e.strokeText(a,t/2,i/2+150),e.fillText(a,t/2,i/2+150),e.fillStyle="#888",e.beginPath(),e.moveTo(100,i/2),e.lineTo(150,i/2-40),e.lineTo(150,i/2+40),e.fill(),e.beginPath(),e.moveTo(t-100,i/2),e.lineTo(t-150,i/2-40),e.lineTo(t-150,i/2+40),e.fill(),e.fillStyle="lime",e.fillRect(t/2-100,i-150,200,80),e.fillStyle="black",e.font="bold 30px Arial",e.fillText("SELECT",t/2,i-100),e.fillStyle="#888",e.beginPath(),e.moveTo(60,20),e.lineTo(30,40),e.lineTo(60,60),e.fill()}}class N extends f{constructor(e){super(e)}update(e){if(this.game.input.keys.Escape&&this.game.setScene(new g(this.game)),this.game.input.mouse.down&&!this.game.input.isDown("Mouse_prev")){const s=this.game.input.mouse.x,t=this.game.input.mouse.y;s<100&&t<60&&this.game.setScene(new g(this.game))}this.game.input.keys.Mouse_prev=this.game.input.mouse.down}draw(e){const s=e.getTransform().a,t=e.canvas.width/s,i=1080;e.fillStyle="#222",e.fillRect(0,0,t,i),e.fillStyle="#fff",e.font="48px Arial",e.textAlign="center",e.fillText("SETTINGS",t/2,i/2-50),e.font="24px Arial",e.fillText("(Placeholder)",t/2,i/2),e.fillStyle="#888",e.beginPath(),e.moveTo(60,20),e.lineTo(30,40),e.lineTo(60,60),e.fill()}}class Y extends f{constructor(e){super(e)}update(e){if(this.game.input.keys.Escape&&this.game.setScene(new g(this.game)),this.game.input.mouse.down&&!this.game.input.isDown("Mouse_prev")){const s=this.game.input.mouse.x,t=this.game.input.mouse.y;s<100&&t<60&&this.game.setScene(new g(this.game))}this.game.input.keys.Mouse_prev=this.game.input.mouse.down}draw(e){const s=e.getTransform().a,t=e.canvas.width/s,i=1080;e.fillStyle="#222",e.fillRect(0,0,t,i),e.fillStyle="#fff",e.font="48px Arial",e.textAlign="center",e.fillText("ACHIEVEMENTS",t/2,i/2-50),e.font="24px Arial",e.fillText("(Placeholder)",t/2,i/2),e.fillStyle="#888",e.beginPath(),e.moveTo(60,20),e.lineTo(30,40),e.lineTo(60,60),e.fill()}}class U extends f{constructor(e){super(e)}update(e){if(this.game.input.keys.Escape&&this.game.setScene(new g(this.game)),this.game.input.mouse.down&&!this.game.input.isDown("Mouse_prev")){const s=this.game.input.mouse.x,t=this.game.input.mouse.y;s<100&&t<60&&this.game.setScene(new g(this.game))}this.game.input.keys.Mouse_prev=this.game.input.mouse.down}draw(e){const s=e.getTransform().a,t=e.canvas.width/s,i=1080;e.fillStyle="#222",e.fillRect(0,0,t,i),e.fillStyle="#fff",e.font="bold 40px Arial",e.textAlign="center",e.fillText("TUTORIAL",t/2,i/2-50),e.font="20px Arial",e.fillText("Use WASD/Arrows to Move",t/2,i/2),e.fillText("Click/Tap to Shoot",t/2,i/2+40),e.fillStyle="#888",e.beginPath(),e.moveTo(60,20),e.lineTo(30,40),e.lineTo(60,60),e.fill()}}class g extends f{options=["PLAY","SETTINGS","ACHIEVEMENTS","TUTORIAL"];selectedOptionIndex=0;constructor(e){super(e)}enter(){this.game.touchControls.hide()}update(e){let s=!1,t=!1,i=!1;if(this.game.input.keys.ArrowDown&&!this.game.input.isDown("ArrowDown_prev")&&(s=!0),this.game.input.keys.ArrowUp&&!this.game.input.isDown("ArrowUp_prev")&&(t=!0),(this.game.input.keys.Enter||this.game.input.keys.Space)&&(i=!0),this.game.input.mouse.down&&!this.game.input.isDown("Mouse_prev")){const a=this.game.input.mouse.y,n=1080,o=60,h=n/2-100;this.options.forEach((r,c)=>{const m=h+c*o;a>=m-30&&a<=m+30&&(this.selectedOptionIndex=c,i=!0)})}if(s&&(this.selectedOptionIndex=(this.selectedOptionIndex+1)%this.options.length),t&&(this.selectedOptionIndex=(this.selectedOptionIndex-1+this.options.length)%this.options.length),this.game.input.keys.ArrowDown_prev=this.game.input.keys.ArrowDown,this.game.input.keys.ArrowUp_prev=this.game.input.keys.ArrowUp,this.game.input.keys.Mouse_prev=this.game.input.mouse.down,i)switch(this.options[this.selectedOptionIndex]){case"PLAY":this.game.setScene(new C(this.game));break;case"SETTINGS":this.game.setScene(new N(this.game));break;case"ACHIEVEMENTS":this.game.setScene(new Y(this.game));break;case"TUTORIAL":this.game.setScene(new U(this.game));break}}draw(e){const s=e.getTransform().a,t=e.canvas.width/s,i=1080;e.fillStyle="#222",e.fillRect(0,0,t,i);const a=p.getImage("MenuBackground");if(a)e.drawImage(a,0,0,t,i);else{e.fillStyle="#fff";const E=Math.min(60,Math.floor(t*.12));e.font=`bold ${E}px Arial`,e.textAlign="center",e.fillText("BIRD MOBA 2D",t/2,i/2-250)}const n=60,o=i/2-100,h=this.options.length*n,r=400,c=20;e.fillStyle="rgba(0, 0, 0, 0.7)";const m=t/2-r/2-c,d=o-c,S=r+c*2,v=h+c*2,y=20;e.beginPath(),e.moveTo(m+y,d),e.arcTo(m+S,d,m+S,d+v,y),e.arcTo(m+S,d+v,m,d+v,y),e.arcTo(m,d+v,m,d,y),e.arcTo(m,d,m+S,d,y),e.closePath(),e.fill(),e.textBaseline="middle",this.options.forEach((E,T)=>{const b=T===this.selectedOptionIndex;e.fillStyle=b?"lime":"#ccc",e.font=b?"bold 40px Arial":"30px Arial",e.fillText(E,t/2,o+T*n+30)}),e.textBaseline="alphabetic",e.fillStyle="#666",e.font="16px Arial",e.fillText("Use Arrow Keys/Touch to Select",t/2,i-30)}}const M=new L(w.CANVAS_ID);p.preload(()=>{M.setScene(new g(M))});
